package com.opencn.mesh.endpoint;import com.alipay.sofa.runtime.api.annotation.SofaClientFactory;import com.alipay.sofa.runtime.api.client.ReferenceClient;import com.alipay.sofa.runtime.api.client.param.BindingParam;import com.alipay.sofa.runtime.api.client.param.ReferenceParam;import com.alipay.sofa.runtime.service.binding.JvmBindingParam;import com.opencn.mesh.model.BizModel;import com.opencn.mesh.model.PipelineRequest;import com.opencn.mesh.model.PipelineResponse;import com.opencn.mesh.service.BizCommonService;import org.springframework.web.bind.annotation.*;@RestController("/")public class TrafficEndPoint {    @SofaClientFactory    private ReferenceClient referenceClient;    @PostMapping("/req")    private PipelineResponse req(@RequestBody PipelineRequest pipelineRequest) {        ReferenceParam<BizCommonService> referenceParam = new ReferenceParam<>();        referenceParam.setInterfaceType(BizCommonService.class);        referenceParam.setUniqueId(pipelineRequest.getBizKey());        referenceParam.setJvmFirst(true);        BizCommonService proxy = referenceClient.reference(referenceParam);        return proxy.invoke(pipelineRequest);    }    @PostMapping("/subscribe")    private PipelineResponse subscribe(@RequestBody PipelineRequest pipelineRequest) {        ReferenceParam<BizCommonService> referenceParam = new ReferenceParam<>();        referenceParam.setInterfaceType(BizCommonService.class);        referenceParam.setUniqueId(pipelineRequest.getBizKey());        referenceParam.setJvmFirst(true);        BizCommonService proxy = referenceClient.reference(referenceParam);        return proxy.subscribe(pipelineRequest);    }    @PostMapping("/callback")    private PipelineResponse callback(@RequestBody PipelineRequest pipelineRequest) {        ReferenceParam<BizCommonService> referenceParam = new ReferenceParam<>();        referenceParam.setInterfaceType(BizCommonService.class);        referenceParam.setUniqueId(pipelineRequest.getBizKey());        referenceParam.setJvmFirst(true);        BizCommonService proxy = referenceClient.reference(referenceParam);        return proxy.callback(pipelineRequest);    }}